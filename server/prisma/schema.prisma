generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model BidRequest {
  request_id          Int      @id
  requested_roster_id Int
  shift               String
  start_date          DateTime
  end_date            DateTime

  @@index([request_id])
}

model Code {
  id           Int      @id @default(autoincrement())
  code_type    String
  code         String
  description  String
  status       String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@unique([code_type, code])
}

model CodeType {
  id           Int      @id @default(autoincrement())
  code_type    String   @unique
  status       String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime
}

model Company {
  id              Int      @id @default(autoincrement())
  uen             String   @unique
  name            String
  contact_no      Int
  email           String
  address         String
  industry        String
  no_of_employees Int
  created_by      String   @default("SYSTEM")
  created_date    DateTime @default(now())
  updated_by      String
  updated_date    DateTime
}

model CompanyCode {
  id           Int
  company_id   Int
  code_type    String
  code         String
  description  String
  status       String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@id([company_id, id])
  @@unique([company_id, code_type, code])
  @@index([company_id])
}

model CompanyCodeType {
  id           Int
  company_id   Int
  code_type    String
  status       String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@id([id, company_id])
  @@unique([company_id, code_type])
  @@index([company_id])
}

model CompanyLeaveBalance {
  id           Int      @id @default(autoincrement())
  company_id   Int
  leave_type   String
  balance      Int
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@unique([company_id, leave_type])
  @@index([company_id])
}

model CompanyLocation {
  id           Int
  company_id   Int
  name         String
  address      String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@id([id, company_id])
  @@index([company_id])
}

model Department {
  id                 Int
  company_id         Int
  department_name    String
  department_head_id Int?
  created_by         String
  created_date       DateTime @default(now())
  updated_by         String
  updated_date       DateTime

  @@id([company_id, id])
  @@unique([department_head_id, company_id])
  @@index([company_id])
}

model EmploymentDetails {
  user_id         Int
  user_company_id Int
  working_hours   Decimal @db.Decimal(5, 2)
  employment_type String

  @@id([user_id, user_company_id])
  @@index([user_id, user_company_id])
}

model LeaveRequest {
  request_id Int      @id
  type       String
  remarks    String?
  start_date DateTime
  end_date   DateTime
  half_day   String
  attachment Bytes?
  no_of_days Decimal  @default(1.0) @db.Decimal(3, 1)

  @@index([request_id])
}

model Registration {
  id                    Int      @id @default(autoincrement())
  uen_id                String
  company_name          String
  registrant_name       String
  contact_no            Int
  email                 String
  address               String
  industry              String
  no_of_employees       Int
  subscription_model_id Int?
  approve_status        String
  created_by            String   @default("SYSTEM")
  created_date          DateTime @default(now())
  updated_by            String
  updated_date          DateTime
}

model Request {
  id           Int      @id @default(autoincrement())
  user_id      Int
  company_id   Int
  type         String
  status       String
  created_by   String
  created_date DateTime @default(now())
  updated_by   String
  updated_date DateTime

  @@index([user_id, company_id])
}

model Roster {
  id            Int
  company_id    Int
  location_id   Int
  department_id Int
  start_date    DateTime
  end_date      DateTime
  type          String
  created_by    String
  created_date  DateTime @default(now())
  updated_by    String
  updated_date  DateTime

  @@id([id, company_id])
  @@index([company_id])
  @@index([department_id, company_id])
  @@index([location_id, company_id])
}

model RosterPosition {
  roster_id  Int
  company_id Int
  position   String
  count      Int

  @@id([roster_id, company_id, position])
  @@index([roster_id, company_id])
}

model RosterTemplate {
  id              Int
  company_id      Int
  roster_type     String
  name            String
  no_of_employees Int
  created_by      String
  created_date    DateTime @default(now())
  updated_by      String
  updated_date    DateTime

  @@id([id, company_id])
  @@unique([name, company_id])
  @@index([company_id])
}

model RosterTemplatePosition {
  roster_template_id Int
  company_id         Int
  position           String
  count              Int

  @@id([roster_template_id, company_id, position])
  @@index([roster_template_id, company_id])
}

model Sequences {
  id             Int      @id @default(autoincrement())
  company_id     Int
  sequence_key   String   @unique
  sequence_value Int      @default(1)
  created_by     String   @default("SYSTEM")
  created_date   DateTime @default(now())
  updated_by     String   @default("SYSTEM")
  updated_date   DateTime
}

model Subscription {
  id                Int      @id @default(autoincrement())
  company_id        Int
  type              String
  employee_quantity Int
  payment_cycle     String?
  price             Decimal? @db.Decimal(5, 2)
  status            String
  start_date        DateTime
  end_date          DateTime
  created_by        String   @default("SYSTEM")
  created_date      DateTime @default(now())
  updated_by        String
  updated_date      DateTime

  @@index([company_id])
}

model SubscriptionModel {
  id            Int      @id @default(autoincrement())
  name          String
  member_limit  Int
  payment_cycle String
  price         Decimal  @db.Decimal(6, 2)
  created_by    String
  created_date  DateTime @default(now())
  updated_by    String
  updated_date  DateTime

  @@unique([name, payment_cycle])
}

model SwapRequest {
  request_id            Int    @id
  requester_user_id     Int
  requester_schedule_id Int
  requested_user_id     Int
  requested_schedule_id Int
  reason                String

  @@index([request_id])
}

model User {
  id            Int
  email         String
  company_id    Int
  contact_no    Int
  created_by    String
  created_date  DateTime @default(now())
  department_id Int?
  fullname      String
  position      String
  role          String
  status        String
  updated_by    String
  updated_date  DateTime
  password      String
  profile_image Bytes?

  @@id([id, company_id])
  @@unique([email, company_id])
  @@index([company_id, department_id])
}

model UserPreference {
  id              Int      @id @default(autoincrement())
  user_id         Int
  user_company_id Int
  module          String
  preference      String
  created_by      String
  created_date    DateTime @default(now())
  updated_by      String
  updated_date    DateTime

  @@index([user_id, user_company_id])
}

model UserSchedule {
  id              Int      @id @default(autoincrement())
  user_id         Int
  user_company_id Int
  roster_id       Int
  start_date      DateTime
  end_date        DateTime
  shift           String
  status          String
  created_by      String
  created_date    DateTime @default(now())
  updated_by      String
  updated_date    DateTime

  @@index([roster_id, user_company_id])
  @@index([user_id, user_company_id])
}
